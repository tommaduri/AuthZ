apiVersion: v1
kind: ConfigMap
metadata:
  name: cretoai-config
  namespace: cretoai
  labels:
    app: cretoai
data:
  node.toml: |
    [node]
    log_level = "info"
    data_dir = "/data"

    [consensus]
    algorithm = "bft"
    quorum_threshold = 0.67  # 2f+1 for f Byzantine nodes (2/3 = 67%)
    finality_timeout_ms = 500
    max_pending_vertices = 10000
    view_change_timeout_ms = 2000

    [network]
    listen_addr = "0.0.0.0:9000"
    quic_port = 9001
    max_connections = 100
    connection_timeout_ms = 5000
    # Bootstrap peers will be set via environment variables
    # bootstrap_peers = []

    [storage]
    backend = "rocksdb"
    path = "/data/db"
    cache_size_mb = 512
    write_buffer_mb = 128
    max_open_files = 1024
    enable_compression = true
    compression_type = "lz4"

    [crypto]
    signature_algorithm = "ml-dsa-87"
    hash_algorithm = "blake3"
    key_path = "/data/keys"

    [metrics]
    enabled = true
    port = 9090
    endpoint = "/metrics"
    histogram_buckets = [0.001, 0.01, 0.1, 0.5, 1.0, 2.0, 5.0]

    [health]
    check_interval_ms = 1000
    liveness_port = 9091
    readiness_port = 9092
